import{a as w}from"../chunk-GPNQZ4ZI.js";var l="has-error",E="alert-success",g="alert-error";function f(t,o){let e=document.getElementById("notification"),n=document.getElementById("notification-header"),r=document.getElementById("notification-message");e&&n&&r&&(o==="success"?(n.textContent="Action Completed",e.classList.remove(g),e.classList.add(E)):(n.textContent="Action Failed",e.classList.remove(E),e.classList.add(g)),r.textContent=t,e.style.display="block")}function m(t,o){return w(this,null,function*(){S(t);let e=new FormData(t),n=t.getAttribute("action"),r=t.querySelector('input[name="_method"]'),i="POST";r&&(i=r.value.toUpperCase());let u={};e.forEach((c,d)=>{d.endsWith("_id")?u[d]=Number(c):u[d]=c});try{let c=yield fetch(n,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),{errors:d,message:C,data:D}=yield c.json();c.ok?(f(C,"success"),i!=="PUT"&&t.reset(),o(D)):(d&&I(t,d),f(C,"error"))}catch(c){f("An error occurred. Please try again.","error")}})}function I(t,o){o.forEach(({field:e,error:n})=>{let r=t.querySelector(`[name="${e}"]`);if(r){let i=r.nextElementSibling;r.classList.add(l),i&&(i.textContent=n)}})}function S(t){t.querySelectorAll("."+l).forEach(o=>{o.classList.remove(l);let e=o.nextElementSibling;e&&(e.textContent="")})}function p(t,o){let e=document.getElementById(t),n=e.querySelector("#dialog-close");n==null||n.addEventListener("click",()=>e==null?void 0:e.close()),window.addEventListener("click",i=>{i.target===e&&e.close()}),o==null||o.addEventListener("change",r),o==null||o.addEventListener("click",r);function r(){o.options[o.selectedIndex].value==="add"&&(e==null||e.showModal())}return e}function h(t,o){let e=Array.from(t.options).slice(1),n=document.createElement("option");n.value=o.id.toString(),n.text=o.name,n.selected=!0,e.push(n),e.sort((i,u)=>i.text.localeCompare(u.text));let r=t.options[0];t.innerHTML="",t.add(r),e.forEach(i=>t.add(i))}var x=document.getElementById("create-host-form"),s=document.getElementById("host_id"),V=p("create-host-dialog",s);function L(){s==null||s.addEventListener("HostCreated",function(t){h(this,t.detail)})}function b(){x==null||x.addEventListener("submit",function(t){t.preventDefault(),m(this,o=>{s==null||s.dispatchEvent(new CustomEvent("HostCreated",{detail:o})),V.close()})})}var y=document.getElementById("create-venue-form"),a=document.getElementById("venue_id");function B(){y==null||y.addEventListener("submit",function(t){t.preventDefault(),m(this,o=>{a==null||a.dispatchEvent(new CustomEvent("VenueCreated",{detail:o})),H.close()})})}var H=p("create-venue-dialog",a);function F(){a==null||a.addEventListener("VenueCreated",function(t){h(this,t.detail)})}var v=document.getElementById("create-activity-form");v==null||v.addEventListener("submit",function(t){t.preventDefault(),m(this,()=>{})});B();b();F();L();
//# sourceMappingURL=create.js.map
