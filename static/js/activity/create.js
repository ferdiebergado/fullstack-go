import{b as y,c as p,d as F,e as l,f as S}from"../chunk-OOUMWJO3.js";F();S();function m(t,e){return y(this,null,function*(){V(t);let o=new FormData(t),r=t.getAttribute("action"),i=t.querySelector('input[name="_method"]'),n="POST";i&&(n=i.value.toUpperCase());let u={};o.forEach((c,d)=>{d.endsWith("_id")?u[d]=Number(c):u[d]=c});try{let c=yield fetch(r,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),{errors:d,message:x,data:D}=yield c.json();c.ok?(l(x,"success"),n!=="PUT"&&t.reset(),e(D)):(d&&I(t,d),l(x,"error"))}catch(c){l("An error occurred. Please try again.","error")}})}function I(t,e){e.forEach(({field:o,error:r})=>{let i=t.querySelector(`[name="${o}"]`);if(i){let n=i.nextElementSibling;i.classList.add(p),n&&(n.textContent=r)}})}function V(t){t.querySelectorAll("."+p).forEach(e=>{e.classList.remove(p);let o=e.nextElementSibling;o&&(o.textContent="")})}function f(t,e){let o=document.getElementById(t),r=o.querySelector("#dialog-close");r==null||r.addEventListener("click",()=>o==null?void 0:o.close()),window.addEventListener("click",n=>{n.target===o&&o.close()}),e==null||e.addEventListener("change",i),e==null||e.addEventListener("click",i);function i(){e.options[e.selectedIndex].value==="add"&&(o==null||o.showModal())}return o}function h(t,e){let o=Array.from(t.options).slice(1),r=document.createElement("option");r.value=e.id.toString(),r.text=e.name,r.selected=!0,o.push(r),o.sort((n,u)=>n.text.localeCompare(u.text));let i=t.options[0];t.innerHTML="",t.add(i),o.forEach(n=>t.add(n))}var E=document.getElementById("create-host-form"),a=document.getElementById("host_id"),B=f("create-host-dialog",a);function w(){a==null||a.addEventListener("HostCreated",function(t){h(this,t.detail)})}function b(){E==null||E.addEventListener("submit",function(t){t.preventDefault(),m(this,e=>{a==null||a.dispatchEvent(new CustomEvent("HostCreated",{detail:e})),B.close()})})}var g=document.getElementById("create-venue-form"),s=document.getElementById("venue_id");function L(){g==null||g.addEventListener("submit",function(t){t.preventDefault(),m(this,e=>{s==null||s.dispatchEvent(new CustomEvent("VenueCreated",{detail:e})),H.close()})})}var H=f("create-venue-dialog",s);function C(){s==null||s.addEventListener("VenueCreated",function(t){h(this,t.detail)})}var v=document.getElementById("create-activity-form");v==null||v.addEventListener("submit",function(t){t.preventDefault(),m(this,()=>{})});L();b();C();w();
//# sourceMappingURL=create.js.map
