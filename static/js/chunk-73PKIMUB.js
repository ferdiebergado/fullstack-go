var f=(o,e,t)=>new Promise((n,r)=>{var s=i=>{try{a(t.next(i))}catch(d){r(d)}},c=i=>{try{a(t.throw(i))}catch(d){r(d)}},a=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,c);a((t=t.apply(o,e)).next())});var l="has-error",m="alert-success",p="alert-error";function u(o,e){let t=document.getElementById("notification"),n=document.getElementById("notification-header"),r=document.getElementById("notification-message");t&&n&&r&&(e==="success"?(n.textContent="Action Completed",t.classList.remove(p),t.classList.add(m)):(n.textContent="Action Failed",t.classList.remove(m),t.classList.add(p)),r.textContent=o,t.style.display="block")}function v(o,e){return f(this,null,function*(){x(o);let t=new FormData(o),n=o.getAttribute("action"),r=o.querySelector('input[name="_method"]'),s="POST";r&&(s=r.value.toUpperCase());let c={};t.forEach((a,i)=>{i.endsWith("_id")?c[i]=Number(a):c[i]=a});try{let a=yield fetch(n,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),{errors:i,message:d,data:h}=yield a.json();a.ok?(u(d,"success"),s!=="PUT"&&o.reset(),e(h)):(i&&E(o,i),u(d,"error"))}catch(a){u("An error occurred. Please try again.","error")}})}function E(o,e){e.forEach(({field:t,error:n})=>{let r=o.querySelector(`[name="${t}"]`);if(r){let s=r.nextElementSibling;r.classList.add(l),s&&(s.textContent=n)}})}function x(o){o.querySelectorAll("."+l).forEach(e=>{e.classList.remove(l);let t=e.nextElementSibling;t&&(t.textContent="")})}function A(o,e){let t=document.getElementById(o),n=t.querySelector("#dialog-close");n==null||n.addEventListener("click",()=>t==null?void 0:t.close()),window.addEventListener("click",s=>{s.target===t&&t.close()}),e==null||e.addEventListener("change",r),e==null||e.addEventListener("click",r);function r(){e.options[e.selectedIndex].value==="add"&&(t==null||t.showModal())}return t}function I(o,e){let t=Array.from(o.options).slice(1),n=document.createElement("option");n.value=e.id.toString(),n.text=e.name,n.selected=!0,t.push(n),t.sort((s,c)=>s.text.localeCompare(c.text));let r=o.options[0];o.innerHTML="",o.add(r),t.forEach(s=>o.add(s))}export{v as a,A as b,I as c};
//# sourceMappingURL=chunk-73PKIMUB.js.map
